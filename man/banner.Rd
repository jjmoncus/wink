% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/banner.R
\name{banner}
\alias{banner}
\title{Create Banner Crosstabs with Statistical Testing}
\usage{
banner(
  data,
  var,
  bys,
  weight = NULL,
  var_nets = NULL,
  digits = 0,
  min_group_n = 100,
  exclude_var = NULL,
  exclude_bys = NULL,
  na.rm = TRUE
)
}
\arguments{
\item{data}{The survey data to us}

\item{var}{A character string specifying the target variable name to be analyzed
against the banner variables}

\item{bys}{A vector of character strings, where each element represents a banner
variable name to be cross-tabulated with the target variable}

\item{min_group_n}{An integer specifying the minimum sample size threshold for statistical
testing. Cells with fewer observations may not be included in testing. Default is 100.}

\item{design}{A survey design object (typically from the survey package) containing
the survey data and design specifications, if you would like weighted percentages. Defaults to NULL}
}
\value{
A data frame containing the combined crosstab results with the following attributes:
\itemize{
\item \code{col_dividers}: A numeric vector indicating where column divisions occur
\item \code{var}: The target variable name used in the analysis
\item \code{bys}: The list of banner variables used in the analysis
}
}
\description{
This function generates multiple crosstabs using banner variables against a target variable,
applying statistical testing across columns. It combines the results into a single table
with appropriate column dividers for presentation.
}
\details{
The function processes each banner variable sequentially, creating crosstabs via
\code{crosstab()} with statistical testing. Statistical testing starts at column B
and progresses through subsequent columns based on the number of columns in each table.

Column dividers are tracked and stored as attributes to facilitate proper formatting
and presentation of the combined results.

\code{exclude_bys} must have length 1 or \code{length(bys)}. If length == \code{length(bys)}, then each
pattern in \code{exclude_bys} is applied to each by of \code{bys} in turn. If length == 1, then
the same pattern is applied to all \code{bys}.

In the case that \code{var} and \code{by} are the same, the result might include extra padder rows corresponding to any
levels of \code{var/by} that were empty, or if \code{na.rm = FALSE} is set and \code{var/by} contains missing values. In both cases, padder rows
are added to ensure the Total columns and subsequent crosstabs align properly.
}
\examples{
\dontrun{
# Create a survey design object
library(survey)
design <- svydesign(ids = ~1, data = my_data, weights = ~weight)

# Define banner variables
my_bys <- list("age_group", "gender", "region")

# Generate banner crosstabs
result <- banners(
  design = design,
  var = "satisfaction",
  bys = my_bys,
  min_group_n = 50
)

# Access column dividers
attr(result, "col_dividers")
}

}
\seealso{
\code{\link{crosstab}} for the underlying crosstab function
}
